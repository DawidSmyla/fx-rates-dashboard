<div class="container">
  <h1>{{ title }}</h1>

  <div class="controls">
    <label>
      Data (YYYY-MM-DD):
      <input [(ngModel)]="dateInput" placeholder="np. 2026-01-30" />
    </label>

    <button (click)="fetchFromNbp()" [disabled]="loading">Pobierz z NBP (POST)</button>
    <button (click)="loadLatest()" [disabled]="loading">Pokaż najnowsze</button>
    <button (click)="loadByDate()" [disabled]="loading">Pokaż dla daty</button>
  </div>

  <div class="summary-controls">
    <label>
      Okres (summary):
      <select [(ngModel)]="summaryPeriod">
        <option value="year">year</option>
        <option value="quarter">quarter</option>
        <option value="month">month</option>
        <option value="day">day</option>
      </select>
    </label>
    <button (click)="loadSummary()" [disabled]="loading">Pokaż podsumowanie</button>
  </div>

  <div class="message" *ngIf="message">{{ message }}</div>

  <div class="latest" *ngIf="latestData">
    <h2>Kursy ({{ latestData.date }})</h2>
    <table>
      <thead>
        <tr><th>Code</th><th>Currency</th><th>Rate</th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of latestData.rates">
          <td>{{ r.code }}</td>
          <td>{{ r.currency }}</td>
          <td>{{ r.rate }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="summary" *ngIf="summaryData">
    <h2>Summary ({{ summaryData.period }})</h2>
    <div *ngFor="let row of summaryData.data | keyvalue">
      <h3>{{ row.key }}</h3>
      <table>
        <thead>
          <tr><th>Code</th><th>Currency</th><th>Rate</th></tr>
        </thead>
        <tbody>
          <tr *ngFor="let r of row.value">
            <td>{{ r.code }}</td>
            <td>{{ r.currency }}</td>
            <td>{{ r.rate }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>